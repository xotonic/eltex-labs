
СИМВОЛЬНОЕ УСТРОЙСТВО
=====================

Данный модуль - псевдо-драйвер, реализующий чтение и запись данных из файла устр
ойства (/dev/chardev).При записи в файл драйвер ожидает 2 целых числа: минимальн
ая и максимальная границы для генератора случайных чисел. При чтении из файла др
айвер выводит одно целое число - среднее по массиву случайно сгенерированных чис
ел в диапазоне, заданном при записи (если запись не была произведена ни разу, из
начальный диапазон: от 0 до 1000). Также драйвер выводит лог в dmesg о вызываемы
х колбэках.

По сравнению с прошлыми вычислениями средних по массиву, текущие используют толь
ко целочисленные значения, т.к. в kernel space по умолчанию не включены операции
для работы с плавающей точкой и добавить функционал довольно сложно и вообще не
рекомендуется.

Версия ядра, на которой проводилось тестирование и сборка:
4.2.0-16-generic

ПРОЦЕСС СБОРКИ И ПРИМЕР ЗАПУСКА
-------------------------------
# Под рутом
dmesg -w

# После чего в новом терминале
make
insmod chardev.ko
cat /dev/chardev
echo "-1000 1000" > /dev/chardev
cat /dev/chardev
# выгрузка модуля
rmmod chardev.ko


Пример вывода dmesg:
[ 9262.426215] chardev: Initialising module. Major number = 247.
[ 9262.426218] chardev: Creating device node
[ 9271.294840] chardev: Device file opened
[ 9271.294844] chardev: Random min = 0, max = 1000
[ 9271.294917] chardev: Writing to device file
[ 9271.294920] chardev: Device file closed
[ 9274.589082] chardev: Device file opened
[ 9274.589085] chardev: Random min = -1000, max = 1000
[ 9274.589155] chardev: Reading from device file
[ 9274.589195] chardev: Reading from device file
[ 9274.589206] chardev: Device file closed
[ 9280.191009] chardev: Deleting device node
[ 9280.191907] chardev: Cleaning up module
